<!DOCTYPE html>
<html>
  <head>
    <title>
      wesleyhales.com: Maven 2 vs. Ant (revisited)
    </title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <link href='/stylesheets/global.css?v23' media='screen, print' rel='stylesheet' type='text/css' />
    <link href='/blog.atom' rel='alternate' type='application/atom+xml' />
    <script src='/js/modernizr.js' type='text/javascript'></script>
  </head>
  <body>
    <header>
      <div class='header-box' onclick="window.location = 'http://wesleyhales.com'">
        <div class='logo-bold'>wesleyhales<span>.com</span></div>
        <nav class='console'>
          <ul id='menu'>
            <li id='home'>
              <a href='/index.html'>Blog</a>
            </li>
            <li id='design'>
              <a href='/design/?p=design'>Projects</a>
            </li>
            <li id='projects'>
              <a href='/contact/?p=contact'>Me</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <aside id='rightcol'>
      <div class='shadow-helper'>
        <div class='left-toolbar'>
          <section class='recent-comments'>
            <header>
              <div class='dsq-widget' id='recentcomments'>
                <h2 class='dsq-widget-title'>
                  Recent Comments
                </h2>
                <script src='http://wesleyhales.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=24&amp;excerpt_length=200' type='text/javascript'></script>
              </div>
            </header>
          </section>
          <section class='tags'>
            <header>
              <h2 class='tags-title'>
                My Book
              </h2>
              <div class='book-container'>
                <a href='http://shop.oreilly.com/product/0636920024088.do'>
                  <img src='/images/icons/mybook.png' />
                </a>
              </div>
            </header>
          </section>
          <section class='tweets'>
            <header>
              <h2 class='tweets-title'>
                <a href='http://twitter.com/wesleyhales'>
                  <img src='//si0.twimg.com/images/dev/cms/intents/bird/bird_blue/bird_16_blue.png' />
                  Tweets
                </a>
              </h2>
              <div id='twitter_div'>
                <ul id='twitter_update_list'></ul>
              </div>
            </header>
          </section>
        </div>
      </div>
    </aside>
    <div id='main'>
      <div id='post-container'>
        <div class='article-list'>
          <div class='post_navigation'>
            <div class='previous_post link'>
              Previous:
              <a href='/blog/2007/10/29/Another-design/'>
                Another design
              </a>
            </div>
            <div class='next_post link'>
              Next:
              <a href='/blog/2007/11/06/The-Smokies/'>
                The Smokies
              </a>
            </div>
            <div class='clearfix'></div>
          </div>
          <div class='post'>
            <h2 class='title'>
              Maven 2 vs. Ant (revisited)
            </h2>
            <h3 class='date'>
              30 October 2007
            </h3>
            <h4 class='tags'>
              <a href='/blog/tags/Java/'>
                Java
              </a>
              |
              <a href='/blog/tags/ant/'>
                ant
              </a>
              |
              <a href='/blog/tags/lrd/'>
                lrd
              </a>
              |
              <a href='/blog/tags/maven/'>
                maven
              </a>
              |
            </h4>
            <div class='content'>
              
              
              <p>Almost a year since I made <a href="http://www.jroller.com/wesleyhales/entry/maven_2_vs_ant_which">this entry</a> and I think Maven is great for open source and commercial apps. Sure, there may be <a href="http://blog.thomas.heute.name/2007/10/ant-vs-maven-round-2.html">a few things</a> you want to do that don't fit into the "Maven way" but for the most part, it is a great build system. 
              Also, any one that uses IntelliJ Idea will fall in love with Maven on first use (I guess it handles Eclipse project files just as well).</p>
              
              
              <p>
              </p></p>
              
              <p>I recently worked on converting a JBoss Portal module from Ant to Maven and you can <a href="http://jbossportal.blogspot.com/search/label/maven">read about</a> a few generic problems that I ran into and how to overcome them. 
              </p>
              
              
              <p></p>
              
              <p>Also, one very powerful feature of Maven that I am messing around with right now is filtering and profile "mashups".
              Lets say, I want LRD (local rapid development ;-) on my workstation using Tomcat. Usually I would use the Jetty plugin because it is the ultimate for Maven LRD, but the majority of the time and to match what is in production, developers use Tomcat at a minimum. Here is a quick tip for creating a shared distributable app using the aforementioned. 
              </p>
              
              
              <p></p>
              
              <p><h3>In a existing Maven app, create the following structure:</h3> 
              <code><pre> &#x000A;src &#x000A;|-main &#x000A;|-filters &#x000A;|-tomcat.properties &#x000A;|-resources &#x000A;|-context.xml &#x000A;</pre></code> 
              </p>
              
              
              <p></p>
              
              <p><h3>In your pom.xml we have something like</h3>: 
              <code><pre> &#x000A;<a name="l1"><span class="s0">&lt;</span><span class="s1">profile</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l2"> </span><span class="s0">&lt;</span><span class="s1">id</span><span class="s0">&gt;</span><span class="s3">tomcat</span><span class="s0">&lt;/</span><span class="s1">id</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l3"> </span><span class="s0">&lt;</span><span class="s1">activation</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l4"> </span><span class="s0">&lt;</span><span class="s1">activeByDefault</span><span class="s0">&gt;</span><span class="s3">false</span><span class="s0">&lt;/</span><span class="s1">activeByDefault</span><span class="s0">&gt;</span><span class="s2"> &#x000A;&#x000A;<a name="l5"> </span><span class="s0">&lt;/</span><span class="s1">activation</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l6"> &#x000A;<a name="l7"> </span><span class="s0">&lt;</span><span class="s1">build</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l8"> &#x000A;<a name="l9"> </span><span class="s0">&lt;</span><span class="s1">filters</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l10"> </span><span class="s0">&lt;</span><span class="s1">filter</span><span class="s0">&gt;</span><span class="s3">src/main/filters/tomcat.properties</span><span class="s0">&lt;/</span><span class="s1">filter</span><span class="s0">&gt;</span><span class="s2"> &#x000A;&#x000A;<a name="l11"> </span><span class="s0">&lt;/</span><span class="s1">filters</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l12"> &#x000A;<a name="l13"> </span><span class="s0">&lt;</span><span class="s1">resources</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l14"> </span><span class="s0">&lt;</span><span class="s1">resource</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l15"> </span><span class="s0">&lt;</span><span class="s1">directory</span><span class="s0">&gt;</span><span class="s3">${basedir}/src/main/resources</span><span class="s0">&lt;/</span><span class="s1">directory</span><span class="s0">&gt;</span><span class="s2"> &#x000A;&#x000A;<a name="l16"> </span><span class="s0">&lt;</span><span class="s1">filtering</span><span class="s0">&gt;</span><span class="s3">true</span><span class="s0">&lt;/</span><span class="s1">filtering</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l17"> </span><span class="s0">&lt;</span><span class="s1">targetPath</span><span class="s0">&gt;</span><span class="s3">../${build.finalName}/META-INF</span><span class="s0">&lt;/</span><span class="s1">targetPath</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l18"> </span><span class="s0">&lt;</span><span class="s1">includes</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l19"> </span><span class="s0">&lt;</span><span class="s1">include</span><span class="s0">&gt;</span><span class="s3">context.xml</span><span class="s0">&lt;/</span><span class="s1">include</span><span class="s0">&gt;</span><span class="s2"> &#x000A;&#x000A;<a name="l20"> </span><span class="s0">&lt;/</span><span class="s1">includes</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l21"> </span><span class="s0">&lt;/</span><span class="s1">resource</span><span class="s0">&gt;</span><span class="s2"> &#x000A;<a name="l22"> </span><span class="s0">&lt;/</span><span class="s1">resources</span><span class="s0">&gt;</span></a> &#x000A;</pre></code> 
              </p>
              
              
              <p></p>
              
              <p><h3>in tomcat.properties</h3> 
              <code><pre> &#x000A;context.docBase=${basedir}/target/${project.build.finalName} &#x000A;context.path=/${project.build.finalName} &#x000A;</pre></code> 
              </p>
              
              
              <p></p>
              
              <p><h3>and in context.xml</h3> 
              <code><pre> &#x000A;&lt;Context path="${context.path}" docBase="${context.docBase}" reloadable="true"/&gt; &#x000A;</pre></code> 
              </p>
              
              
              <p></p>
              
              <p>Once you have all of this in place (along with a good cargo config found <a href="http://www.jroller.com/wesleyhales/entry/running_seam_2_0_on">in this post</a>) you will be on your way to a enjoyable, easy development setup.</p>
              
              
              <p></p>
              
              <p> 
              <p> 
              So now, all you have to do to hot deploy your maven app to a running instance of Tomcat is type the following: 
              <code>mvn install -Ptomcat</code><br/> 
              This will compile and deploy your changes quickly. You can also set your IDE to copy jsp/xhtml files over using a keyboard shortcut mapping (easy to do with Idea) so for UI changes you don't have to hot deploy every time. 
              </p> 
              This example just scratches the surface of what mixing profiles with filtering can do. You could have a filtering/profile mechanism for every possible scenario. 
              </p>
            </div>
            <div class='comments'>
              
                          <div id="disqus_thread"></div>
                          <script type="text/javascript">
                          var disqus_shortname = 'wesleyhales';
                          var disqus_url = "http://www.wesleyhales.com/blog/2007/10/30/Maven-2-vs-Ant-revisited/";
                          var disqus_developer = null;
                          var disqus_identifier = null;
                          (function() {
                            var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                            dsq.src = "http://wesleyhales.disqus.com/embed.js";
                            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                          })();
                          </script>
                          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=wesleyhales">comments powered by Disqus.</a></noscript>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br class='clear' />
    <script src='//platform.twitter.com/widgets.js' type='text/javascript'></script>
    <script src='http://twitter.com/javascripts/blogger.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        function twitterCallback3(twitters) {
          var statusHTML = [];
          //var ls = 'localStorage' in window && window['localStorage'] !== null;
          for (var i=0; i<twitters.length; i++){
            var username = twitters[i].user.screen_name;
            var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
              return '<a href="'+url+'">'+url+'</a>';
            }).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
              return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
            });
            statusHTML.push('<li><div>'+status+'</div><div class="actions"><a href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'">'+relative_time(twitters[i].created_at)+'</a>|<a class="tweet_action tweet_retweet" href="http://twitter.com/intent/retweet?tweet_id='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/retweet.png">retweet</a>|<a class="tweet_action tweet_reply" href="http://twitter.com/intent/tweet?in_reply_to='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/reply.png">reply</a></div></li>');
          }
          document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
        }
        
        // my custom JS
        
        //get a request pramaeter
        function getParameterByName(name) {
          var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
          return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
        }   
        
        //reckless abandon - adding querySelector as an option to getElementById
        var orig = document.getElementById;
        document.getElementById = function(){
          if (document.querySelector){
              return document.querySelector('#' + arguments[0]);
          }else{
              return orig(arguments[0]);
          }
        }   
        
        //navigation based on above method... could be better
        if(getParameterByName("p") == "design"){
          document.getElementById('design').className = 'selected';
        } else if(getParameterByName("p") == "projects"){
          document.getElementById('projects').className = 'selected';
        } else if(getParameterByName("p") == "contact"){
          document.getElementById('contact').className = 'selected';
        } else {
          document.getElementById('home').className = 'selected';
        }
        
        //-----------------------------------------/end nav
        
        /*var killed = false;
        
        if((!Modernizr.touch || window.innerWidth > 980)) {
          try{
            //todo need to handle orientation change here as well
            window.onscroll = function(){
              if(!killed){
                if(typeof( window.pageYOffset ) == 'number'){
                  if(window.pageYOffset > 1650) {
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide';
                  }
                }else{
                  //lets deal with IE for the hell of it
                  if(document.documentElement.scrollTop > 1650 ){
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'none';
                  }
                }
              }
            }
          }catch(e){
            //swallow
          }
        }
        
        function showNotif(){
          document.getElementById("fillitkillit").className = 'sticky-top-right notif transition show';
        }
        //
        function fillit() {
          document.getElementById('rightcol').className = 'hidden';
          document.getElementById('post-container').style.width = '100%';
          document.getElementById('post-container').style.padding = '15px 0 15px 15px';
          document.getElementById('post-container').className = 'transition';
          document.getElementById('main').style.margin = '154px 0 0 0';
          document.getElementById('main').className = 'transition';
          killit();
        }
        
        function killit() {
          if(document.documentElement){
             //again, deal with IE
             document.getElementById("fillitkillit").className = 'none'
          }else{
             document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide'  
          }
          
          killed = true;
        }*/
      //]]>
    </script>
    <script src='http://twitter.com/statuses/user_timeline/wesleyhales.json?callback=twitterCallback3&amp;amp;count=2' type='text/javascript'></script>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-1241000-10");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
