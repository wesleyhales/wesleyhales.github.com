<!DOCTYPE html>
<html>
  <head>
    <title>
      wesleyhales.com: Blog
    </title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <link href='/stylesheets/global.css' media='screen, print' rel='stylesheet' type='text/css' />
    <link href='/blog.atom' rel='alternate' type='application/atom+xml' />
    <script src='/js/modernizr.js' type='text/javascript'></script>
  </head>
  <body>
    <header>
      <div class='header-box'>
        <div class='logo-bold'>wesleyhales<span>.com</span></div>
        <nav class='console'>
          <ul id='menu'>
            <li id='home'>
              <a href='/index.html'>Blog</a>
            </li>
            <li id='design'>
              <a href='/design/?p=design'>Design</a>
            </li>
            <li id='projects'>
              <a href='/projects/?p=projects'>Projects</a>
            </li>
            <li id='contact'>
              <a href='/contact/?p=contact'>Contact</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <aside id='rightcol'>
      <div class='shadow-helper'>
        <div class='left-toolbar'>
          <section class='tweets'>
            <header>
              <h1 class='tweets-title'>
                <a href='http://twitter.com/wesleyhales'>
                  <img src='//si0.twimg.com/images/dev/cms/intents/bird/bird_blue/bird_16_blue.png' />
                  My Tweets
                </a>
              </h1>
              <div id='twitter_div'>
                <ul id='twitter_update_list'></ul>
              </div>
            </header>
          </section>
          <section class='tags'>
            <header>
              <h1 class='tags-title'>
                Tags
              </h1>
            </header>
            <span class='tag tag-0'>
              <a href='/blog/tags/2.0/'>2.0</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/2011/'>2011</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/301/'>301</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/Design/'>Design</a>
            </span>
            <span class='tag tag-6'>
              <a href='/blog/tags/Java/'>Java</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/Life/'>Life</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/Utils/'>Utils</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/ajax/'>ajax</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/ajaxworld/'>ajaxworld</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/anniversary/'>anniversary</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/ant/'>ant</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/anthem/'>anthem</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/bad/'>bad</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/balls/'>balls</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/blog/'>blog</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/bridge/'>bridge</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/cargo/'>cargo</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/cdi/'>cdi</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/conferences/'>conferences</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/container/'>container</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/css/'>css</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/demo/'>demo</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/design/'>design</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/drive/'>drive</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/enterprise/'>enterprise</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/facebook/'>facebook</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/file/'>file</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/firefox/'>firefox</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/flying/'>flying</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/forensics/'>forensics</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/framework/'>framework</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/god/'>god</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/growl/'>growl</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/hard/'>hard</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/hibernate/'>hibernate</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/hornetq/'>hornetq</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/html5/'>html5</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/infinispan/'>infinispan</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/innerhtml/'>innerhtml</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/java/'>java</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jazoon/'>jazoon</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/jboss/'>jboss</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jesus/'>jesus</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jetty/'>jetty</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jms/'>jms</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jquery/'>jquery</a>
            </span>
            <span class='tag tag-2'>
              <a href='/blog/tags/jsf/'>jsf</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/jsr/'>jsr</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/kick/'>kick</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/life/'>life</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/lrd/'>lrd</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/maven/'>maven</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/mobile/'>mobile</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/modal/'>modal</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/opensocial/'>opensocial</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/pdf/'>pdf</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/portal/'>portal</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/portals/'>portals</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/portlet/'>portlet</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/portlets/'>portlets</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/recovery/'>recovery</a>
            </span>
            <span class='tag tag-2'>
              <a href='/blog/tags/richfaces/'>richfaces</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/saucer/'>saucer</a>
            </span>
            <span class='tag tag-2'>
              <a href='/blog/tags/seam/'>seam</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/theme/'>theme</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/tomcat/'>tomcat</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/trinidad/'>trinidad</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/undelete/'>undelete</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/vacation/'>vacation</a>
            </span>
            <span class='tag tag-1'>
              <a href='/blog/tags/web/'>web</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/websocket/'>websocket</a>
            </span>
            <span class='tag tag-0'>
              <a href='/blog/tags/weld/'>weld</a>
            </span>
          </section>
          <div class='none' id='fillitkillit'>
            Why waste this space?
            <br />
            <a href='javascript:fillit();void(0)'>fill</a>
            |
            <a href='javascript:killit();void(0)'>kill</a>
          </div>
        </div>
      </div>
    </aside>
    <div id='main'>
      <div id='post-container'>
        <div class='article-list'>
          <div class='post-preview'>
            <div class='post'>
              <header>
                <h2 id='post-title'>
                  <a href='/blog/2012/01/20/Sending-CDI-events-to-the-browser-with-websockets/'>
                    Pushing CDI Events to the Browser with WebSockets
                  </a>
                </h2>
                <h3>
                  20 January 2012
                </h3>
                <h4>
                  <a href='/blog/tags/html5/'></a>
                  html5
                  <a href='/blog/tags/websocket/'></a>
                  websocket
                  <a href='/blog/tags/jboss/'></a>
                  jboss
                  <a href='/blog/tags/jetty/'></a>
                  jetty
                  <a href='/blog/tags/cdi/'></a>
                  cdi
                </h4>
              </header>
              <div class='content'>
                
                
                <div class="notes" >
                Disclaimer: Minimal load testing was performed with 10000 concurrent WebSocket connections. You can see some true performance numbers <a href="http://webtide.intalio.com/2011/09/cometd-2-4-0-websocket-benchmarks/">here</a>.
                </div>
                
                
                <div class="download">
                  <a href="https://github.com/wesleyhales/HTML5-Mobile-WebSocket" title="Fork me on github"><img src="/images/icons/github-icon.jpg" width="48" height="48" alt="Github Icon"></a>
                  <a href="https://github.com/wesleyhales/HTML5-Mobile-WebSocket/raw/master/jboss-as-html5-mobile.war" title="download the .war"><img src="/images/icons/download.png" width="48" height="48" alt="Download"></a>
                </div>
                
                
                <div style="clear:both;"></div>
                
                
                <p>
                  
                <p>Here is the demo in action. As you can see on the right, I have 2 chat windows open and on the left we have a member registration. Users are chatting across a raw WebSocket connection and when another user registers, the CDI event is fired all the way through to the browser as a JavaScript alert via the connected WebSocket clients.</p>
                <iframe src="http://player.vimeo.com/video/35433707?title=0&amp;byline=0&amp;portrait=0" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
                
                <p>  
                With WebSockets, we have a new development model for server side applications; event based programming. There are 3 out-of-box events associated with WebSockets: onopen, onmessage, and onclose. For starters, we must wire up these three listeners to utilize the core functionality that the WebSocket specification gives us. The open event is fired when the WebSocket connection is opened successfully. The message event is fired when the server sends data. The close event is fired when the WebSocket connection is closed.
                </p>
                
                <script src="https://gist.github.com/1651079.js?file=websocketBasic.js"></script>
                
                <p>
                But sending messages in the form of strings over raw WebSockets isn't very appealing when we're wanting to develop advanced web applications. Obviously, we're going to be using JSON to transfer data to and from the server. But how do we propagate our CDI events which are fired on the server and have them bubble up on the client?
                </p>
                <p>
                First, we'll start with the server. I'm using the <a href="http://www.jboss.org/jbossas/downloads/">JBoss AS7 application server</a> and embedding <a href="http://eclipse.org/jetty/">Jetty</a> within my web application. Thanks to <a href="http://angelozerr.wordpress.com/2011/07/26/websockets_jetty_step4/">this article</a>, I was able to easily add the latest Jetty server to my maven project (dependencies below) to get everything up and running in a few minutes.
                </p>
                <p>
                A few things worth noting:
                </p>
                <ul>
                <li>Security: Since our WebSocket server is running on a different port (8081) than our AS7 server (8080), we must account for not having the ability to share cookies, etc...</li>
                <li>Proxies: As if proxy servers weren't already a huge problem for running WebSockets and HTTP over the same port, we are now running the separately (but I have a semi-solution for this below)</li>
                <li>Threading: Since we're observing/listening for CDI events, we must perform some thread same operations and connection sharing.</li>
                </ul>
                <p>
                So, if you're still reading ;) let's get on with the code.
                </p>
                <p>
                Download the latest <a href="http://www.jboss.org/jbossas/downloads/">JBoss AS7 (7.1.0.CR1b as of this writing)</a>
                </p>
                <p>
                Add the Jetty maven dependencies to your project. This demo is based off of the <a href="https://github.com/jbossas/quickstart/tree/master/html5-mobile">original html5-mobile quickstart for JBoss AS7</a>.
                </p>
                <script src="https://gist.github.com/1651079.js?file=pom.xml"></script>
                
                <p>
                Next we setup the WebSocket server using Jetty's WebSocketHandler and embedding it inside a ServletContextListener.
                Here we're sharing a synchronized set of WebSocket connections across threads. Using the synchronized keyword, we ensure that only a single thread can execute a method or block at one time. The ChatWebSocketHandler contains a global Set of webSocket connections and adds each new connection as it's made within the Jetty server
                <a href="https://github.com/wesleyhales/HTML5-Mobile-WebSocket/tree/master/src/main/java/org/jboss/as/quickstarts/html5_mobile/websockets">View complete source here.</a>
                </p>
                <script src="https://gist.github.com/1651079.js?file=ChatWebSocketHandler.java"></script>
                <script src="https://gist.github.com/1651079.js?file=ChatServerServletContextListener.java"></script>
                
                <p>
                Now we'll create a method to observe CDI events and send the fired "Member" events to all active connections.
                </p>
                <script src="https://gist.github.com/1651079.js?file=ChatWebSocketHandler-observer.java"></script>
                
                <p>
                The above code will observe the following event when a new Member is registered through the web interface.
                </p>
                <script src="https://gist.github.com/1651079.js?file=MemberService.java"></script>
                
                <p>
                Finally, we setup our WebSocket JavaScript client and safely avoid using the eval() method to execute the received JavaScript.
                </p>
                <script src="https://gist.github.com/1651079.js?file=websocketclient.js"></script>
                
                <p>
                Here is the JavaScript code which listens for our CDI event, and executes the necessary client side code. (This is the alert popup seen in the video above.)
                </p>
                <script src="https://gist.github.com/1651079.js?file=cdiJavascriptListener.js"></script> 
                
                <p>One additional piece I added to this approach is the use of HAProxy. This gives us a reverse-proxy on the WebSocket port (8081), in the end allowing all traffic (HTTP and ws/wss) to be sent across a central port - 8080 in this case. </p>
                <script src="https://gist.github.com/1651079.js?file=haproxy.config"></script>
                
                <p>
                As you can see, this is a very prototyped approach to achieve $SUBJECT, but it's a step forward in adding a usable programming layer on top of the WebSocket protocol. There's probably a few framework out there which try to provide a programming model on top of WebSockets, so leave comments if you know of any.
                </p>
              </div>
              <div class='comments'>
                
              </div>
            </div>
          </div>
          <div class='post-preview'>
            <div class='post'>
              <header>
                <h2 id='post-title'>
                  <a href='/blog/2011/08/29/Fixing-Ajax-on-Mobile-Devices-with-HTML5/'>
                    Fixing Ajax on Mobile Devices (with HTML5)
                  </a>
                </h2>
                <h3>
                  29 August 2011
                </h3>
                <h4>
                  <a href='/blog/tags/Java/'></a>
                  Java
                  <a href='/blog/tags/ajax/'></a>
                  ajax
                  <a href='/blog/tags/html5/'></a>
                  html5
                  <a href='/blog/tags/innerhtml/'></a>
                  innerhtml
                </h4>
              </header>
              <div class='content'>
                
                
                <p><p>&#8220;Not only is innerHTML bad, it is the root cause of many problems&#8230; from browser memory leaks (it destroys/replaces existing elements that may have event handlers attached) to failing completely on iOSâ€™s Mobile Safari. Yes, that&#8216;s right, it just flakes out.&#8221;</p> 
                
                <p><a href="http://community.jboss.org/people/wesleyhales/blog/2011/08/28/fixing-ajax-on-mobile-devices">Read on...</a><br /> 
                </p></p>
              </div>
              <div class='comments'>
                
              </div>
            </div>
          </div>
          <div class='post-preview'>
            <div class='post'>
              <header>
                <h2 id='post-title'>
                  <a href='/blog/2011/02/05/Replacing-Photoshop-With-CSS3-Creating-Styles/'>
                    Replacing Photoshop With CSS3 - Creating Styles
                  </a>
                </h2>
                <h3>
                  05 February 2011
                </h3>
                <h4>
                  <a href='/blog/tags/Java/'></a>
                  Java
                  <a href='/blog/tags/html5/'></a>
                  html5
                </h4>
              </header>
              <div class='content'>
                
                
                <p><p>One trendy technique that I often use in Photoshop (for buttons, nav bars, etc&#8230;) is a gradient that slightly variates from its base color with a hint of inner shadow (for highlight).<br /> 
                This used to be a pain in the royal ass to implement with html/css2, but now is amazingly simple with <span class="caps">CSS3</span>. Not only is it simple, but you can also create a sort of &#8220;gradient template&#8220; to be reused. Kind of like a &#8220;style&#8221; which can be applied to any element in Photoshop.</p><br />
                <p class="pTitle">First off, this is how I would normally do it in Photoshop:</p><ol><li>Create the element &#8211; a button in this case:<br /> 
                <img alt="" src="/images/jroller/css3post/button.PNG"/></li><br /> 
                <li>Create your gradient. Gradients that are hardly gradients seem to give a nice appearance and body to the design. Meaning you start with a base color like #6c291f and move up the scale to #e42a00.<br /> 
                <img alt="" src="/images/jroller/css3post/gardient-setup.PNG"/><br /> 
                </li><br /> 
                <li>Next you add an inner shadow to give it a glow like effect. Again this too is based on your gradient color.<br /> 
                <img alt="" src="/images/jroller/css3post/innerglow.PNG"/><br /> 
                </li><br /> 
                <li>Here is the end result (from Photoshop):<br /> 
                <img alt="" src="/images/jroller/css3post/red.button.photoshop.PNG"/><br /> 
                </li></ol></p>
                
                
                <p></p>
                
                <p><p class="pTitle">Now, let's do the exact same thing in CSS3 with 1 step.</p><p>This tested fine across all the latest browsers (Firefox 3.6+, Latest Safari, Latest Chrome, and who cares about IE <img src="http://www.jroller.com/images/smileys/wink.gif" class="smiley" alt=";)" title=";)" /></p><ol><li>Simply use the brightest part of the gradient color from above (#e42a00) and substitute it as the background color below:<br /> 
                <pre style="line-height: 100%;font-family:monospace;background-color:#ffffff; border-width:0.01mm; border-color:#000000; border-style:solid;padding:4px;font-size:10px;"><span style="color:#800000;background-color:#f0f0f0;"> 1 </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">button</span><span style="background-color:#ffffff;">.</span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">red</span><span style="background-color:#ffffff;"> {<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 2 </span><span style="background-color:#ffffff;"> </span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">background</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">: </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">#e42a00</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;"> </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;"><del>moz</del>linear-gradient</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">90</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">deg</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">.3</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">) </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">33</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">%, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">.1</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">) </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">123</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">%)</span></span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 3 </span><span style="background-color:#ffffff;"> </span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">background</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">: </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">#e42a00</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;"> </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;"><del>webkit</del>gradient</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">linear</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#008000;background-color:#ffffff;font-weight:bold;">left</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;"> </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#008000;background-color:#ffffff;font-weight:bold;">top</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#008000;background-color:#ffffff;font-weight:bold;">left</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;"> </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#008000;background-color:#ffffff;font-weight:bold;">bottom</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">from</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">255</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">.1</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">)), </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">to</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">(</span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">0</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">, </span></span><span style="text-decoration:underline;color:#cccccc"><span style="color:#0000ff;background-color:#ffffff;">.3</span></span><span style="text-decoration:underline;color:#cccccc"><span style="background-color:#ffffff;">)))</span></span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 4 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">border-radius</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">7</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 5 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;"><del>moz</del>border-radius</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">7</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 6 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;"><del>webkit</del>border-radius</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">7</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 7 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">border</span><span style="background-color:#ffffff;">: </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">none</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 8 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">box-shadow</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">6</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;"> </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span><span style="background-color:#ffffff;">(</span><span style="color:#0000ff;background-color:#ffffff;">255</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">1</span><span style="background-color:#ffffff;">) </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">inset</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;"> 9 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;"><del>moz</del>box-shadow</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">6</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;"> </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span><span style="background-color:#ffffff;">(</span><span style="color:#0000ff;background-color:#ffffff;">255</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">1</span><span style="background-color:#ffffff;">) </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">inset</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;">10 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;"><del>webkit</del>box-shadow</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">6</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;"> </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span><span style="background-color:#ffffff;">(</span><span style="color:#0000ff;background-color:#ffffff;">255</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">102</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">1</span><span style="background-color:#ffffff;">) </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">inset</span><span style="background-color:#ffffff;">;</span></pre><br /> 
                </li><br /> 
                <li>Here is the end result (from Firefox):<br /> 
                <img alt="" src="/images/jroller/css3post/red.button.css.PNG"></li><br /> 
                </ol></p>
                
                
                <p></p>
                
                <p><p>Notice from the css code that we are only using one color? This is so we can easily create a super class that allows us to override its functionality. In the end all you would need is one line of code for background color to create a button for every color that exists with the same style from above applied to it.</p><br /> 
                <p>Now to create a button using the same &#8220;style&#8221;, you would only have to create a class that defines the background color and inner shadow highlight. i.e&#8230;.<br /> 
                <pre style="line-height: 100%;font-family:monospace;background-color:#ffffff; border-width:0.01mm; border-color:#000000; border-style:solid;padding:4px;font-size:10px;"><span style="color:#800000;background-color:#f0f0f0;">1 </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">button</span><span style="background-color:#ffffff;">.</span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">lightblue</span><span style="background-color:#ffffff;"> {<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;">2 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;">background-color</span><span style="background-color:#ffffff;">: </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">#41b6ff</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;">3 </span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;font-weight:bold;"><del>moz</del>box-shadow</span><span style="background-color:#ffffff;">: </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">0</span><span style="background-color:#ffffff;"> </span><span style="color:#0000ff;background-color:#ffffff;">6</span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">px</span><span style="background-color:#ffffff;"> </span><span style="color:#000080;background-color:#ffffff;font-weight:bold;">rgba</span><span style="background-color:#ffffff;">(</span><span style="color:#0000ff;background-color:#ffffff;">55</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">243</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">255</span><span style="background-color:#ffffff;">,</span><span style="color:#0000ff;background-color:#ffffff;">1</span><span style="background-color:#ffffff;">) </span><span style="color:#008000;background-color:#ffffff;font-weight:bold;">inset</span><span style="background-color:#ffffff;">;<br /> &#x000A;</span><span style="color:#800000;background-color:#f0f0f0;">4 </span><span style="background-color:#ffffff;">}</span></pre></p><br /> 
                <p>This would give you a button like this:<br /> 
                <img alt="" src="/images/jroller/css3post/blue.button.css.PNG"/></p><br /> 
                <p>The only part that isn't really flexible is the inner shadow feathering. It is currently set to blur the shadow by a fixed pixel. It would be awesome if you could blur by percent as this would allow the gradient filled element to be resized dynamically and maintain the aspect of inner glow.</p></p>
              </div>
              <div class='comments'>
                
              </div>
            </div>
          </div>
          <div class="pagination-links"><span class="current-page">1</span> </div>
        </div>
      </div>
    </div>
    <br class='clear' />
    <script src='//platform.twitter.com/widgets.js' type='text/javascript'></script>
    <script src='http://twitter.com/javascripts/blogger.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        function twitterCallback3(twitters) {
          var statusHTML = [];
          for (var i=0; i<twitters.length; i++){
            var username = twitters[i].user.screen_name;
            var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
              return '<a href="'+url+'">'+url+'</a>';
            }).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
              return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
            });
            statusHTML.push('<li><div>'+status+'</div><div class="actions"><a href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'">'+relative_time(twitters[i].created_at)+'</a>|<a class="tweet_action tweet_retweet" href="http://twitter.com/intent/retweet?tweet_id='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/retweet.png">retweet</a>|<a class="tweet_action tweet_reply" href="http://twitter.com/intent/tweet?in_reply_to='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/reply.png">reply</a></div></li>');
          }
          document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
        }
        
        // my custom JS
        
        //get a request pramaeter
        function getParameterByName(name) {
          var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
          return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
        }   
        
        //reckless abandon - adding querySelector as an option to getElementById
        var orig = document.getElementById;
        document.getElementById = function(){
          if (document.querySelector){
              return document.querySelector('#' + arguments[0]);
          }else{
              return orig(arguments[0]);
          }
        }   
        
        //navigation based on above method... could be better
        if(getParameterByName("p") == "design"){
          document.getElementById('design').className = 'selected';
        } else if(getParameterByName("p") == "projects"){
          document.getElementById('projects').className = 'selected';
        } else if(getParameterByName("p") == "contact"){
          document.getElementById('contact').className = 'selected';
        } else {
          document.getElementById('home').className = 'selected';
        }
        //-----------------------------------------/end nav
        
        var killed = false;
        
        if((!Modernizr.touch || window.innerWidth > 980)) {
          try{
            //todo need to handle orientation change here as well
            window.onscroll = function(){
              if(!killed){
                if(typeof( window.pageYOffset ) == 'number'){
                  if(window.pageYOffset > 1650) {
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide';
                  }
                }else{
                  //lets deal with IE for the hell of it
                  if(document.documentElement.scrollTop > 1650 ){
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'none';
                  }
                }
              }
            }
          }catch(e){
            //swallow
          }
        }
        
        function showNotif(){
          document.getElementById("fillitkillit").className = 'sticky-top-right notif transition show';
        }
        //
        function fillit() {
          document.getElementById('rightcol').className = 'hidden';
          document.getElementById('post-container').style.width = '100%';
          document.getElementById('post-container').style.padding = '15px 0 15px 15px';
          document.getElementById('post-container').className = 'transition';
          document.getElementById('main').style.margin = '154px 0 0 0';
          document.getElementById('main').className = 'transition';
          killit();
        }
        
        function killit() {
          if(document.documentElement){
             //again, deal with IE
             document.getElementById("fillitkillit").className = 'none'
          }else{
             document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide'  
          }
          
          killed = true;
        }
      //]]>
    </script>
    <script src='http://twitter.com/statuses/user_timeline/wesleyhales.json?callback=twitterCallback3&amp;amp;count=2' type='text/javascript'></script>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-1241000-10");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
