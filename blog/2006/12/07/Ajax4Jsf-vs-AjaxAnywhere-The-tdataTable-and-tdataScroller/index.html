<!DOCTYPE html>
<html>
  <head>
    <title>
      wesleyhales.com: Ajax4Jsf vs AjaxAnywhere&#58; The t&#58;dataTable and t&#58;dataScroller
    </title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <link href='/stylesheets/global.css?v23' media='screen, print' rel='stylesheet' type='text/css' />
    <link href='/blog.atom' rel='alternate' type='application/atom+xml' />
    <script src='/js/modernizr.js' type='text/javascript'></script>
  </head>
  <body>
    <header>
      <div class='header-box' onclick="window.location = 'http://wesleyhales.com'">
        <div class='logo-bold'>wesleyhales<span>.com</span></div>
        <nav class='console'>
          <ul id='menu'>
            <li id='home'>
              <a href='/index.html'>Blog</a>
            </li>
            <li id='design'>
              <a href='/design/?p=design'>Projects</a>
            </li>
            <li id='projects'>
              <a href='/contact/?p=contact'>Me</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <aside id='rightcol'>
      <div class='shadow-helper'>
        <div class='left-toolbar'>
          <section class='recent-comments'>
            <header>
              <div class='dsq-widget' id='recentcomments'>
                <h2 class='dsq-widget-title'>
                  Recent Comments
                </h2>
                <script src='http://wesleyhales.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=24&amp;excerpt_length=200' type='text/javascript'></script>
              </div>
            </header>
          </section>
          <section class='tags'>
            <header>
              <h2 class='tags-title'>
                My Book
              </h2>
              <div class='book-container'>
                <a href='http://shop.oreilly.com/product/0636920024088.do'>
                  <img src='/images/icons/mybook.png' />
                </a>
              </div>
            </header>
          </section>
          <section class='tweets'>
            <header>
              <h2 class='tweets-title'>
                <a href='http://twitter.com/wesleyhales'>
                  <img src='//si0.twimg.com/images/dev/cms/intents/bird/bird_blue/bird_16_blue.png' />
                  Tweets
                </a>
              </h2>
              <div id='twitter_div'>
                <ul id='twitter_update_list'></ul>
              </div>
            </header>
          </section>
        </div>
      </div>
    </aside>
    <div id='main'>
      <div id='post-container'>
        <div class='article-list'>
          <div class='post_navigation'>
  <div class='previous_post link'>
    Previous:
    <a href='/blog/2006/12/06/JSF-Component-Library-Integration/'>
      JSF Component Library Integration
    </a>
  </div>
  <div class='next_post link'>
    Next:
    <a href='/blog/2006/12/10/Maven-2-vs-Ant-Which-is-better-for-commercial-apps/'>
      Maven 2 vs Ant - Which is better for commercial apps
    </a>
  </div>
  <div class='clearfix'></div>
</div>
<div class='post'>
  <h2 class='title'>
    Ajax4Jsf vs AjaxAnywhere&#58; The t&#58;dataTable and t&#58;dataScroller
  </h2>
  <h3 class='date'>
    07 December 2006
  </h3>
  <h4 class='tags'>
    <a href='/blog/tags/Java/'>
      Java
    </a>
    |
  </h4>
  <div class='content'>
    

<p class="pTitle">Submitting with Ajax4Jsf</p>




<p>On Dec 6, Ajax4Jsf released a maintenance release (ajax4jsf-1.0.4MR1.jar which fixed an IE javascript problem not in this post) - But the framework is still a little buggy dealing with the datascroller components. On a good note, Adrian Mitev gave his custom <a href="https://ajax4jsf.dev.java.net/servlets/ProjectDocumentList?folderID=6510&expandFolder=6510&folderID=5320">ajaxDataScroller </a> to the A4J project and will hopefully get everything working in both browsers. ***UPDATE - Here is the <a href="http://www.jroller.comsrc="http://www.wesleyhales.com/jroller/resource/datascroller.jar">latest version</a> of the datascroller from Adrian. I had to rename the extension to .jar instead of .zip for upload reasons. If you have trouble extracting, just rename the file to .zip. Adrian says <quote>"Actually the attributes of ac:ajaxDataScroller tag differs from the attributes of t:dataScroller. You don't have paginatorMaxPages="9", the attribute is maxPages."</quote></p>


<p></p>

<pre>&#x000A;<span class="s1">&lt;</span><span class="s5">a4j:form </span><span class="s2">ajaxSubmit=</span><span class="s4">"true" </span><span class="s2">reRender=</span><span class="s4">"carList,carIndex,scroll_1"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l41"> &#x000A;</a><a name="l42">            <span class="s1">&lt;</span><span class="s5">a4j:region </span><span class="s2">id=</span><span class="s4">"stat1"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l43"> &#x000A;</a><a name="l44">                <span class="s1">&lt;</span><span class="s5">a4j:outputPanel </span><span class="s2">id=</span><span class="s4">"list-body"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l45"> &#x000A;</a><a name="l46">                    <span class="s1">&lt;</span><span class="s5">t:dataTable </span><span class="s2">id=</span><span class="s4">"carIndex"</span><span class="s10">...&gt;</span><span class="s3"> &#x000A;</span></a><a name="l47"> &#x000A;</a><a name="l48">                    <span class="s1">&lt;</span><span class="s5">t:dataTable </span><span class="s2">id=</span><span class="s4">"carList"</span><span class="s10">...&gt;</span><span class="s3"> &#x000A;</span></a><a name="l49"> &#x000A;</a><a name="l50">                <span class="s1">&lt;/</span><span class="s5">a4j:outputPanel</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l51"> &#x000A;</a><a name="l52">                <span class="s1">&lt;</span><span class="s5">t:dataScroller </span><span class="s2">id=</span><span class="s4">"scroll_1"</span><span class="s1"> &#x000A;</span></a><a name="l53">                        <span class="s2">for=</span><span class="s4">"carList"</span><span class="s1"> &#x000A;</span></a><a name="l54">                        <span class="s2">fastStep=</span><span class="s4">"10"</span><span class="s1"> &#x000A;</span></a><a name="l55">                        <span class="s2">pageCountVar=</span><span class="s4">"pageCount"</span><span class="s1"> &#x000A;</span></a><a name="l56">                        <span class="s2">pageIndexVar=</span><span class="s4">"pageIndex"</span><span class="s1"> &#x000A;</span></a><a name="l57">                        <span class="s2">styleClass=</span><span class="s4">"scroller"</span><span class="s1"> &#x000A;</span></a><a name="l58">                        <span class="s2">paginator=</span><span class="s4">"true"</span><span class="s1"> &#x000A;</span></a><a name="l59">                        <span class="s2">paginatorMaxPages=</span><span class="s4">"9"</span><span class="s1"> &#x000A;</span></a><a name="l60">                        <span class="s2">paginatorTableClass=</span><span class="s4">"paginator"</span><span class="s1"> &#x000A;</span></a><a name="l61">                        <span class="s2">paginatorActiveColumnStyle=</span><span class="s4">"font-weight:bold;"</span><span class="s1"> &#x000A;</span></a><a name="l62">                        <span class="s2">actionListener=</span><span class="s4">"&#35;{inventoryList.scrollerAction}"</span><span class="s1"> &#x000A;</span></a><a name="l63">                        &gt;<span class="s3"> &#x000A;</span></a><a name="l64">                <span class="s1">&lt;/</span><span class="s5">t:dataScroller</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l65"> &#x000A;</a><a name="l66">                <span class="s1">&lt;</span><span class="s5">a4j:status </span><span class="s2">for=</span><span class="s4">"stat1" </span><span class="s2">forceId=</span><span class="s4">"true" </span><span class="s2">id=</span><span class="s4">"ajaxStatus"</span><span class="s10">...&gt;</span><span class="s3"> &#x000A;</span></a><a name="l67"> &#x000A;</a><a name="l68">             <span class="s1">&lt;/</span><span class="s5">a4j:region</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l69"> &#x000A;</a><a name="l70"> &#x000A;</a><a name="l71">        <span class="s1">&lt;/</span><span class="s5">a4j:form</span><span class="s1">&gt;</span><span class="s3"> </a></pre>




<p>The above code is functional in Firefox 1.5+ but not in IE 6+. The only bug in Firefox (that I've seen so far) is that a selected status/style on the page number link, once it has been clicked, does not appear. It looks like the component itself is not being reRendered, although it is specified in the a4j:form tag. Other than that, Sergey, Alex, and crew have been doing an awesome job answering posts and getting the maintenance releases out... keep em' coming guys!</p>


<p></p>

<p>The paging doesn't work at all in IE - it has to be something small...</p>




<p class="pTitle">Submitting with AjaxAnywhere</p>




<p>
As much as I would love to stick with one ajax framework across the entire app, we have to have a fallback plan. AjaxAnywhere has been a life saver getting the Tomahawk components submitting. The only downfall with this framework is that you are limited no partial page updates, and nowhere near the capabilities/enhancements that A4J has...
</p>


<p>
The following code does the Ajax submit in both browser with all components working like they should. Using the A4J:status together with a custom "loading..." window with aa took some hackery, but I was able to get both working (in next post I will explain) 
</p>


<pre>&#x000A;<span class="s1">&lt;</span><span class="s5">h:form </span><span class="s2">id=</span><span class="s4">"mainForm"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l42"> &#x000A;</a><a name="l43">                <span class="s1">&lt;</span><span class="s5">aa:zoneJSF </span><span class="s2">id=</span><span class="s4">"dataTableZone"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;&#x000A;</span></a><a name="l44">                         &#x000A;</a><a name="l45">                <span class="s1">&lt;</span><span class="s5">a4j:region </span><span class="s2">id=</span><span class="s4">"stat1"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l46">     &#x000A;</a><a name="l47">                <span class="s1">&lt;</span><span class="s5">a4j:outputPanel </span><span class="s2">id=</span><span class="s4">"list-body"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l48">                <span class="s1">&lt;</span><span class="s5">t:dataTable...</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l49">                <span class="s1">&lt;/</span><span class="s5">a4j:outputPanel</span><span class="s1">&gt;</span><span class="s3"> &#x000A;&#x000A;</span></a><a name="l50">     &#x000A;</a><a name="l51">                        <span class="s1">&lt;</span><span class="s5">a4j:status </span><span class="s2">for=</span><span class="s4">"stat1" </span><span class="s2">forceId=</span><span class="s4">"true" </span><span class="s2">id=</span><span class="s4">"ajaxStatus"</span><span class="s10">...&gt;</span><span class="s3"> &#x000A;</span></a><a name="l52">     &#x000A;</a><a name="l53">                 <span class="s1">&lt;/</span><span class="s5">a4j:region</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l54">     &#x000A;&#x000A;</a><a name="l55">                <span class="s1">&lt;</span><span class="s5">t:dataScroller </span><span class="s2">id=</span><span class="s4">"scroll_1"</span><span class="s10">...&gt;</span><span class="s3"> &#x000A;</span></a><a name="l56"> &#x000A;</a><a name="l57">            <span class="s1">&lt;/</span><span class="s5">aa:zoneJSF</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l58"> &#x000A;</a><a name="l59">        <span class="s1">&lt;/</span><span class="s5">h:form</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l60"> &#x000A;&#x000A;</a><a name="l61">        <span class="s1">&lt;</span><span class="s5">script </span><span class="s2">type=</span><span class="s4">"text/JavaScript" </span><span class="s2">src=</span><span class="s4">"/facelet-sandbox/aa.js"</span><span class="s1">/&gt;</span><span class="s3"> &#x000A;</span></a><a name="l62"> &#x000A;</a><a name="l63">         <span class="s1">&lt;</span><span class="s5">script </span><span class="s2">type=</span><span class="s4">"text/JavaScript"</span><span class="s1">&gt;</span><span class="s3"> &#x000A;</span></a><a name="l64"> &#x000A;</a><a name="l65">            ajaxAnywhere.getZonesToReload = <span class="s6">function</span><span class="s3">(url, submitButton) { &#x000A;&#x000A;</span></a><a name="l66">                <span class="s6">return </span><span class="s9">'dataTableZone'</span><span class="s3">; &#x000A;</span></a><a name="l67">            } &#x000A;</a><a name="l68"> &#x000A;</a><a name="l69">            ajaxAnywhere.formName = <span class="s9">'mainForm'</span><span class="s3">; &#x000A;</span></a><a name="l70">            ajaxAnywhere.substituteFormSubmitFunction(); &#x000A;</a><a name="l71">            ajaxAnywhere.substituteSubmitButtonsBehavior(<span class="s6">true</span><span class="s3">); &#x000A;&#x000A;</span></a><a name="l72">           &#x000A;</a><a name="l73">        <span class="s1">&lt;/</span><span class="s5">script</span><span class="s1">&gt;</span><span class="s3"></a> </pre>




<p>One more thing, the reason I am nesting an a4j:outputPanel in the above code is for a4j:commandLinks inside the form. So far I haven't had any problems with both frameworks playing nicely together</p>


<p></p>
  </div>
  <div class='comments'>
    
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                var disqus_shortname = 'wesleyhales';
                var disqus_url = "http://www.wesleyhales.com/blog/2006/12/07/Ajax4Jsf-vs-AjaxAnywhere-The-tdataTable-and-tdataScroller/";
                var disqus_developer = null;
                var disqus_identifier = null;
                (function() {
                  var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                  dsq.src = "http://wesleyhales.disqus.com/embed.js";
                  (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=wesleyhales">comments powered by Disqus.</a></noscript>
  </div>
</div>
        </div>
      </div>
    </div>
    <br class='clear' />
    <script src='//platform.twitter.com/widgets.js' type='text/javascript'></script>
    <script src='http://twitter.com/javascripts/blogger.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        function twitterCallback3(twitters) {
          var statusHTML = [];
          //var ls = 'localStorage' in window && window['localStorage'] !== null;
          for (var i=0; i<twitters.length; i++){
            var username = twitters[i].user.screen_name;
            var status = twitters[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g, function(url) {
              return '<a href="'+url+'">'+url+'</a>';
            }).replace(/\B@([_a-z0-9]+)/ig, function(reply) {
              return  reply.charAt(0)+'<a href="http://twitter.com/'+reply.substring(1)+'">'+reply.substring(1)+'</a>';
            });
            statusHTML.push('<li><div>'+status+'</div><div class="actions"><a href="http://twitter.com/'+username+'/statuses/'+twitters[i].id_str+'">'+relative_time(twitters[i].created_at)+'</a>|<a class="tweet_action tweet_retweet" href="http://twitter.com/intent/retweet?tweet_id='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/retweet.png">retweet</a>|<a class="tweet_action tweet_reply" href="http://twitter.com/intent/tweet?in_reply_to='+twitters[i].id_str+'"><img src="//si0.twimg.com/images/dev/cms/intents/icons/reply.png">reply</a></div></li>');
          }
          document.getElementById('twitter_update_list').innerHTML = statusHTML.join('');
        }
        
        // my custom JS
        
        //get a request pramaeter
        function getParameterByName(name) {
          var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
          return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
        }   
        
        //reckless abandon - adding querySelector as an option to getElementById
        var orig = document.getElementById;
        document.getElementById = function(){
          if (document.querySelector){
              return document.querySelector('#' + arguments[0]);
          }else{
              return orig(arguments[0]);
          }
        }   
        
        //navigation based on above method... could be better
        if(getParameterByName("p") == "design"){
          document.getElementById('design').className = 'selected';
        } else if(getParameterByName("p") == "projects"){
          document.getElementById('projects').className = 'selected';
        } else if(getParameterByName("p") == "contact"){
          document.getElementById('contact').className = 'selected';
        } else {
          document.getElementById('home').className = 'selected';
        }
        
        //-----------------------------------------/end nav
        
        /*var killed = false;
        
        if((!Modernizr.touch || window.innerWidth > 980)) {
          try{
            //todo need to handle orientation change here as well
            window.onscroll = function(){
              if(!killed){
                if(typeof( window.pageYOffset ) == 'number'){
                  if(window.pageYOffset > 1650) {
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide';
                  }
                }else{
                  //lets deal with IE for the hell of it
                  if(document.documentElement.scrollTop > 1650 ){
                    showNotif();
                  }else{
                    document.getElementById("fillitkillit").className = 'none';
                  }
                }
              }
            }
          }catch(e){
            //swallow
          }
        }
        
        function showNotif(){
          document.getElementById("fillitkillit").className = 'sticky-top-right notif transition show';
        }
        //
        function fillit() {
          document.getElementById('rightcol').className = 'hidden';
          document.getElementById('post-container').style.width = '100%';
          document.getElementById('post-container').style.padding = '15px 0 15px 15px';
          document.getElementById('post-container').className = 'transition';
          document.getElementById('main').style.margin = '154px 0 0 0';
          document.getElementById('main').className = 'transition';
          killit();
        }
        
        function killit() {
          if(document.documentElement){
             //again, deal with IE
             document.getElementById("fillitkillit").className = 'none'
          }else{
             document.getElementById("fillitkillit").className = 'sticky-top-right notif transition hide'  
          }
          
          killed = true;
        }*/
      //]]>
    </script>
    <script src='http://twitter.com/statuses/user_timeline/wesleyhales.json?callback=twitterCallback3&amp;amp;count=2' type='text/javascript'></script>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-1241000-10");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
