<!DOCTYPE html>
<html>
  <head>
    <title>
      wesleyhales.com: Adventures with the Skia Debugger
    </title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/stylesheets/global.css?v31" media="screen, print" rel="stylesheet" type="text/css">
    <link href="/blog.atom" rel="alternate" type="application/atom+xml">
    <script defer="defer" src="/js/modernizr.js" type="text/javascript"></script>
    <script src="//www.google-analytics.com/cx/api.js?experiment=0000001" type="text/javascript"></script>
    <script>
      var image_variations = [
        'original.png',
        'variation1.png',
        'variation2.png'
      ]
      
      // 2. Choose the Variation for the Visitor
      var variation = cxApi.chooseVariation();
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-1241000-10', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header>
      <div class="header-box" onclick="window.location = 'http://wesleyhales.com'">
        <div class="logo-bold">wesleyhales<span>.com</span></div>
        <nav class="console">
          <ul id="menu">
            <li id="home">
              <a href="/index.html">Blog</a>
            </li>
            <li id="design">
              <a href="/design/?p=design">Projects</a>
            </li>
            <li id="projects">
              <a href="/contact/?p=contact">Me</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <aside id="rightcol">
      <div class="shadow-helper">
        <div class="left-toolbar">
          <section class="tags">
            <header>
              <h2 class="tags-title">
                Upcoming Events
              </h2>
              <div class="upcoming-container">
                <a href="http://fluentconf.com/fluent2014/public/schedule/detail/32856" target="blank">
                  <img class="float-left" src="/images/icons/fluent2013_logo_reg.gif" width="150px">
                </a>
                <a href="http://devnexus.com/s/speakers" target="blank">
                  <img class="float-right" src="/images/icons/devnexus.png">
                </a>
              </div>
            </header>
          </section>
          <section class="clear recent-comments">
            <header>
              <div class="dsq-widget" id="recentcomments">
                <h2 class="dsq-widget-title">
                  Recent Comments
                </h2>
                <script src="http://wesleyhales.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=0&amp;avatar_size=24&amp;excerpt_length=200" type="text/javascript"></script>
              </div>
            </header>
          </section>
          <section class="tags">
            <header>
              <h2 class="tags-title">
                My Book
              </h2>
              <div class="book-container">
                <a href="http://www.amazon.com/HTML5-JavaScript-Apps-Wesley-Hales/dp/1449320511/">
                  <img src="/images/icons/mybook.png">
                </a>
              </div>
            </header>
          </section>
          <section class="tweets" style="margin: 20px 0 0 0;">
            <header>
              <a class="twitter-timeline" data-dnt="true" data-widget-id="276405487782739969" href="https://twitter.com/wesleyhales">Tweets by @wesleyhales</a>
              <script>
                !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
              </script>
            </header>
          </section>
        </div>
      </div>
    </aside>
    <div id="main">
      <div id="post-container">
        <div class="article-list">
          <div class="post_navigation">
            <div class="previous_post link">
              Previous:
              <a href="/blog/2012/11/01/I-Will-Sleep-When-I-Die/">
                I'll Sleep When I Die - All for HTML5
              </a>
            </div>
            <div class="next_post link">
              Next:
              <a href="/blog/2013/02/25/How-Collective-Wisdom-Shapes-a-Talk/">
                How Collective Wisdom Shapes a Talk
              </a>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="post">
            <h2 class="title">
              Adventures with the Skia Debugger
            </h2>
            <h3 class="date">
              18 February 2013
            </h3>
            <h4 class="tags">
              <a href="/blog/tags/frontend/">
                frontend
              </a>
              |
              <a href="/blog/tags/html/">
                html
              </a>
              |
              <a href="/blog/tags/css/">
                css
              </a>
              |
              <a href="/blog/tags/graphics/">
                graphics
              </a>
              |
              <a href="/blog/tags/debug/">
                debug
              </a>
              |
            </h4>
            <div class="content">
              <br/>
              
              
              <h3>Debugging jank, reflows, etc...</h3>
              
              
              <p>The <a href="https://sites.google.com/site/skiadocs/developer-documentation/skia-debugger">Skia debugger</a> was mentioned a few weeks ago at EdgeConf as a way to examine how the DOM is loaded and processed in the Chromium web browser. Skia is the open source C++ graphics library backing Chromium/Chrome. It comes with a graphical tool used to step through and analyze the contents of the skia picture format.</p>
              
              <p>If you haven’t watched <a href="http://www.youtube.com/watch?v=3-WYu_p5rdU">this video</a>, I recommend you take a few minutes and watch the first part to understand the context of why the Skia debugger was mentioned and where it might be useful. For the impatient, there was a lot of talk around image decoding and scrolling. This morphed into a discussion about bounce rates and how scrolling really matters from an experience standpoint. Basically, if you’re scrolling sucks, users do a lot less and bounce quicker.</p>
              
              <p>Overall, it sparked my curiosity to see if I could get a visual understanding of reflow happening on web sites/apps... much like this FF3 reflow video from a few years ago.</p>
              
              <iframe width="420" height="315" src="http://www.youtube.com/embed/ZTnIxIA5KGw" frameborder="0" allowfullscreen></iframe>
              
              
              <p>Although the Skia debugger doesn't give us a nice video with animations (like shown above), it does give some really good info on how graphics are drawn into the browser.
              This <a href="http://blog.mozilla.org/gen/2009/04/09/how-to-make-your-own-gecko-reflow-video/">blog post</a> explains how the above video was created with FF 3.1, but I’m not sure if anyone has attempted it with the latest Firefox build... and there is no visual debugger afaik. I did hear one of the panel members mention a Firefox “jank mode” but a short Google search turned up little results that don’t work on the latest version.</p>
              
              <br/>
              
              
              <h3>Building the debugger from source</h3>
              
              
              <p>I will state upfront that there was a lot of pain that went into building both the debugger and chromium from source, but as you will see, it was worth it.</p>
              
              <p>Here are my build notes for OSX 10.7.5:</p>
              
              <script src="https://gist.github.com/wesleyhales/4980385.js"></script>
              
              
              
              
              <br/>
              
              
              <h3>Using the Debugger</h3>
              
              
              <p>The debugger is fairly straightforward to use once a picture is loaded in. You can step through different commands via the up and down keys and clicking on the command in the list. You can also pause execution of commands with the pause button in order to inspect the details of the command in the inspector tabs down below.
              <img src="/images/posts/2013-02-18/skia-ss.PNG" alt="skia" class="margin10 max-width-100">
              Here are the available keyboard shortcuts for the debugger:
              <img src="/images/posts/2013-02-18/skia-commands.PNG" alt="skia" class="margin10 max-width-100"></p>
              
              <p>After playing around with the debugger, it’s nice to get a very low level snapshot of how long it takes a specific browser to draw the pictures necessary to present a web page.</p>
              
              <p>P.S. I plan on uploading my produced binaries (somewhere), so if you're on a Mac around version 10.7.5, hit me up @wesleyhales. Hopefully I can save a few poor souls a weekend full of building from sources ;)
              Happy debugging!</p>
            </div>
            <div class="comments">
              
                          <div id="disqus_thread"></div>
                          <script type="text/javascript">
                          var disqus_shortname = 'wesleyhales';
                          var disqus_url = "http://www.wesleyhales.com/blog/2013/02/18/Adventures-With-the-Skia-Debugger/";
                          var disqus_developer = null;
                          var disqus_identifier = null;
                          (function() {
                            var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                            dsq.src = "http://wesleyhales.disqus.com/embed.js";
                            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                          })();
                          </script>
                          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=wesleyhales">comments powered by Disqus.</a></noscript>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br class="clear">
    <script defer="defer" src="/js/site.js" type="text/javascript"></script>
    <img border="0" src="http://titan.d2ship.com/beacon.php?ss_ad_client=cacbdce0e986dc8e">
    <script>
      <!--
      var ss_ad_client = 'cacbdce0e986dc8e';
      (function() {
        var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true;
        s.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'titan.d2ship.com/pov.js';
        var t = document.getElementsByTagName('script')[0]; t.parentNode.insertBefore(s, t);
      })();
      //-->
    </script>
  </body>
</html>
